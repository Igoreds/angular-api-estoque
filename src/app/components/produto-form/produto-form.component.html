<div class="container mt-4">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{ produtoId ? 'Editar' : 'Adicionar' }} Produto</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="produtoForm" (ngSubmit)="onSubmit()">

        <div class="row">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Nome</mat-label>
              <input matInput formControlName="nome" required>
              <mat-error *ngIf="produtoForm.get('nome')?.hasError('required')">
                Nome é obrigatório
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Preço</mat-label>
              <input matInput type="number" formControlName="preco" required min="0.01" step="0.01">
              <mat-error *ngIf="produtoForm.get('preco')?.hasError('required')">
                Preço é obrigatório
              </mat-error>
              <mat-error *ngIf="produtoForm.get('preco')?.hasError('min')">
                Preço deve ser maior que zero
              </mat-error>
            </mat-form-field>
          </div>
        </div>


        <div class="row">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Quantidade</mat-label>
              <input matInput type="number" formControlName="quantidade" required min="0">
              <mat-error *ngIf="produtoForm.get('quantidade')?.hasError('required')">
                Quantidade é obrigatória
              </mat-error>
              <mat-error *ngIf="produtoForm.get('quantidade')?.hasError('min')">
                Quantidade não pode ser negativa
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Categoria</mat-label>
              <input matInput formControlName="categoria" required>
              <mat-error *ngIf="produtoForm.get('categoria')?.hasError('required')">
                Categoria é obrigatória
              </mat-error> 
            </mat-form-field>
          </div>
        </div>

        <div class="d-flex justify-content-end mt-3">
          <button mat-raised-button color="warn" type="button" routerLink="/produtos" class="me-2">
            Cancelar
          </button>
          <button mat-raised-button color="primary" type="submit" [disabled]="produtoForm.invalid">
            {{ produtoId ? 'Atualizar' : 'Salvar' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>